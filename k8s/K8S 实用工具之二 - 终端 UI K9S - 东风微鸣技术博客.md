## å¼€ç¯‡[](https://ewhisper.cn/posts/48546/#%E5%BC%80%E7%AF%87%20-5)

ğŸ“œ **å¼•è¨€** ï¼š

-   ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥
-   å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨

-   ç¬¬ä¸€ç¯‡ï¼šã€Š[K8S å®ç”¨å·¥å…·ä¹‹ä¸€ - å¦‚ä½•åˆå¹¶å¤šä¸ª kubeconfigï¼Ÿ](https://ewhisper.cn/posts/46789/)ã€‹

åƒæˆ‘è¿™ç§ï¼Œ`kubectl` ç”¨çš„ä¸æ˜¯éå¸¸æºœï¼Œç»å¸¸ä¼šç¢°åˆ°ä»¥ä¸‹æƒ…å†µï¼š

-   å¿˜è®°å‘½ä»¤ï¼Œå…ˆæ•² `--help`ï¼Œå†æ•²å‘½ä»¤ï¼Œæ•ˆç‡ä½
-   å¿˜è®°åŠ  `-n` æŒ‡å®š namespace
-   å¤ªé•¿çš„å‘½ä»¤ç»å¸¸è®°é”™æˆ–æ•²é”™ï¼Œæ¯”å¦‚ `kubectl exec -it...`
-   æ— æ³•å¿«é€Ÿå°†æ—¥å¿—ã€yaml å¤åˆ¶å‡ºæ¥
-   å¯¹äº CRD ç±»èµ„æºï¼Œè®°ä¸ä½ CRD typeï¼ŒæŸ¥ä¸åˆ°ç›¸å…³ä¿¡æ¯
-   æ— æ³•æŒæ¡é›†ç¾¤çš„å¥åº·åŠç›‘æ§çŠ¶æ€
-   â€¦

å¦‚æœä½ çš„å·¥ä½œæœºï¼ˆå‰ç½®æœºã€è·³æ¿æœºã€æ“ä½œæœºã€å ¡å’æœºâ€¦ï¼‰åªæ˜¯ Linux Shellï¼Œè€Œæ²¡æœ‰æ¡Œé¢ç¯å¢ƒã€‚é‚£ä¹ˆæˆ‘å¼ºçƒˆæ¨èä½ ä½¿ç”¨è¿™ä¸ª K8S å®ç”¨å·¥å…·ï¼šç»ˆç«¯ UI **K9S**ã€‚

K9Sï¼šK9s æ˜¯ä¸€ä¸ª **åŸºäºç»ˆç«¯çš„ UI**ï¼Œç”¨äºä¸ Kubernetes é›†ç¾¤è¿›è¡Œäº¤äº’ã€‚è¿™ä¸ªé¡¹ç›®çš„ç›®çš„æ˜¯ä½¿å¯¼èˆªã€è§‚å¯Ÿå’Œç®¡ç†å·²éƒ¨ç½²çš„åº”ç”¨ç¨‹åºå˜å¾—æ›´å®¹æ˜“ã€‚K9s æŒç»­ç›‘è§† Kubernetes çš„å˜åŒ–ï¼Œå¹¶æä¾›åç»­å‘½ä»¤ä¸è§‚å¯Ÿåˆ°çš„èµ„æºè¿›è¡Œäº¤äº’ã€‚

[![k9s](https://pic-cdn.ewhisper.cn/img/2021/11/11/2c229ab93dd22d3791a06d482a56b89b-k9s.png)](https://pic-cdn.ewhisper.cn/img/2021/11/11/2c229ab93dd22d3791a06d482a56b89b-k9s.png "k9s")

## ğŸ–Œï¸ K9S åŠŸèƒ½[](https://ewhisper.cn/posts/48546/#%F0%9F%96%8C%EF%B8%8F-K9S-%20%E5%8A%9F%E8%83%BD)

-   ä¿¡æ¯è§¦æ‰‹å¯åŠï¼
    -   è·Ÿè¸ª Kubernetes é›†ç¾¤ä¸­è¿è¡Œçš„èµ„æºçš„å®æ—¶æ´»åŠ¨ã€‚
-   æ ‡å‡†èµ„æºæˆ– CRDï¼Ÿ
    -   å¤„ç† Kubernetes æ ‡å‡†èµ„æºå’Œè‡ªå®šä¹‰èµ„æºå®šä¹‰ï¼ˆå³ï¼šCRDï¼‰ã€‚
-   é›†ç¾¤æŒ‡æ ‡
    -   è·Ÿè¸ªä¸ podã€å®¹å™¨å’ŒèŠ‚ç‚¹ï¼ˆnodeï¼‰ç­‰èµ„æºç›¸å…³çš„å®æ—¶æŒ‡æ ‡ã€‚
-   å—åˆ°é«˜çº§ç”¨æˆ·æ¬¢è¿ï¼
    -   æä¾›æ ‡å‡†çš„é›†ç¾¤ç®¡ç†å‘½ä»¤ï¼Œå¦‚æ—¥å¿—ã€ä¼¸ç¼©ã€ç«¯å£è½¬å‘ã€é‡å¯ç­‰
    -   **å®šä¹‰æ‚¨è‡ªå·±çš„å‘½ä»¤å¿«æ·é”®**ï¼Œé€šè¿‡å‘½ä»¤åˆ«åå’Œçƒ­é”®å¿«é€Ÿå¯¼èˆªã€‚
    -   k9s æ”¯æŒæ’ä»¶æ‰©å±•ï¼Œä»¥åˆ›å»ºæ‚¨è‡ªå·±çš„é›†ç¾¤å‘½ä»¤ã€‚
    -   å¼ºå¤§çš„è¿‡æ»¤æ¨¡å¼ï¼Œå…è®¸ç”¨æˆ·æ·±å…¥å’ŒæŸ¥çœ‹ä¸å·¥ä½œè´Ÿè½½ç›¸å…³çš„èµ„æºã€‚
-   é”™è¯¯é’»å–
    -   ç›´æ¥é’»å–ç¾¤é›†èµ„æºçš„é”™è¯¯ã€‚
-   çš®è‚¤å’Œå¯å®šåˆ¶æ€§
    -   é€šè¿‡ K9s çš®è‚¤å®šä¹‰æ‚¨è‡ªå·±çš„å¤–è§‚å’Œæ„Ÿè§‰ã€‚
    -   è‡ªå®šä¹‰ / æ’åˆ—è¦åœ¨æ¯ä¸ªèµ„æºåŸºç¡€ä¸Šæ˜¾ç¤ºçš„åˆ—ã€‚
-   çª„æˆ–å®½?
    -   æä¾›æŸ¥çœ‹æœ€å°æˆ–å®Œæ•´èµ„æºå®šä¹‰çš„åˆ‡æ¢
-   å¤šèµ„æºè§†å›¾
    -   é€šè¿‡ **Pulses** å’Œ **XRay** è§†å›¾æä¾›é›†ç¾¤èµ„æºçš„æ¦‚è¿°ã€‚
-   æˆ‘ä»¬æ‹¿åˆ°ä½ çš„ RBAC äº†ï¼
    -   æ”¯æŒæŸ¥çœ‹ RBAC è§„åˆ™ï¼Œå¦‚é›†ç¾¤ / è§’è‰²åŠå…¶å…³è”ç»‘å®šã€‚
    -   åå‘æŸ¥æ‰¾æ–­è¨€ç”¨æˆ· / ç»„æˆ– ServiceAccount åœ¨é›†ç¾¤ä¸Šå¯ä»¥åšä»€ä¹ˆã€‚
-   å†…ç½®åŸºå‡†æµ‹è¯•ï¼ˆBenchmarkingï¼‰
    -   æ‚¨å¯ä»¥ç›´æ¥ä» K9s å¯¹ HTTP æœåŠ¡ /pod è¿›è¡ŒåŸºå‡†æµ‹è¯•ï¼Œä»¥æŸ¥çœ‹åº”ç”¨ç¨‹åºçš„è¿è¡Œæƒ…å†µï¼Œå¹¶ç›¸åº”åœ°è°ƒæ•´èµ„æºè¯·æ±‚ / é™åˆ¶ã€‚
-   èµ„æºå›¾éå†
    -   K9s æä¾›äº† Kubernetes èµ„æºåŠå…¶å…³è”èµ„æºçš„ç®€å•éå†ã€‚

## ğŸ› ï¸ å®‰è£…[](https://ewhisper.cn/posts/48546/#%F0%9F%9B%A0%EF%B8%8F-%20%E5%AE%89%E8%A3%85)

ç›´æ¥ä» [release](https://github.com/derailed/k9s/releases) é¡µé¢ä¸‹è½½å¯¹åº”ç‰ˆæœ¬è§£å‹åˆ° `/usr/local/bin` å³å¯ã€‚

## âŒ¨ï¸ å‘½ä»¤[](https://ewhisper.cn/posts/48546/#%E2%8C%A8%EF%B8%8F-%20%E5%91%BD%E4%BB%A4)

å®‰è£…åç›´æ¥è¿è¡Œ `k9s`ï¼Œå°±ä¼šè¿›å…¥ UI ç•Œé¢ï¼Œå¦‚ä¸‹å›¾ï¼š

[![k9s é¦–é¡µ](https://pic-cdn.ewhisper.cn/img/2021/11/11/04b5572dfe255bcc3c66e4fb2bc4e3fb-image-20211111232452195.png)](https://pic-cdn.ewhisper.cn/img/2021/11/11/04b5572dfe255bcc3c66e4fb2bc4e3fb-image-20211111232452195.png "k9s é¦–é¡µ")

### ğŸ‘½ï¸ å¿«æ·é”®[](https://ewhisper.cn/posts/48546/#%F0%9F%91%BD%EF%B8%8F-%20%E5%BF%AB%E6%8D%B7%E9%94%AE)

| æ“ä½œ | å‘½ä»¤ | å¤‡æ³¨ |
| --- | --- | --- |
| æ˜¾ç¤ºæ´»è·ƒçš„é”®ç›˜åŠ©è®°ç¬¦å’Œå¸®åŠ© | `?` |  |
| æ˜¾ç¤ºé›†ç¾¤ä¸Šæ‰€æœ‰å¯ç”¨çš„åˆ«åå’Œèµ„æº | `ctrl-a` or `:alias` |  |
| é€€å‡º K9s | `:q`, `ctrl-c` |  |
| ä½¿ç”¨å•æ•° / å¤æ•°æˆ–çŸ­åç§°æŸ¥çœ‹ Kubernetes èµ„æº | `:`poâ | æ¥å—å•æ•°ï¼Œå¤æ•°ï¼ŒçŸ­åæˆ–åˆ«åå¦‚ `pod` æˆ– `pods` |
| æŸ¥çœ‹ç»™å®šåç§°ç©ºé—´ä¸­çš„ Kubernetes èµ„æº | `:`alias namespaceâ |  |
| è¿‡æ»¤å‡ºç»™å®šè¿‡æ»¤å™¨çš„èµ„æºè§†å›¾ | `/`filterâ | æ”¯æŒ Regex2ï¼Œå¦‚ \` fred |
| åå‘æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤å™¨ | `/`! filterâ | ä¿ç•™æ‰€æœ‰ _ä¸åŒ¹é…_ çš„ä¸œè¥¿ã€‚æ—¥å¿—æœªå®ç°ã€‚ |
| æŒ‰æ ‡ç­¾è¿‡æ»¤èµ„æºè§†å›¾ | `/`\-l label-selectorâ |  |
| æ¨¡ç³ŠæŸ¥æ‰¾ç»™å®šçš„èµ„æº | `/`\-f filterâ |  |
| é€€å‡ºè§†å›¾ / å‘½ä»¤ / è¿‡æ»¤æ¨¡å¼ | `<esc>` |  |
| é”®æ˜ å°„æ¥æè¿°(describe)ï¼ŒæŸ¥çœ‹(view)ï¼Œç¼–è¾‘(edit)ï¼ŒæŸ¥çœ‹æ—¥å¿—(logs)ï¼Œâ€¦ | `d`,`v`, `e`, `l`,â€¦ |  |
| æŸ¥çœ‹å¹¶åˆ‡æ¢åˆ°å¦ä¸€ä¸ª Kubernetes ä¸Šä¸‹æ–‡ | `:`ctxâ |  |
| æŸ¥çœ‹å¹¶åˆ‡æ¢åˆ°å¦ä¸€ä¸ª Kubernetes ä¸Šä¸‹æ–‡ | `:`ctx context-nameâ |  |
| æŸ¥çœ‹å¹¶åˆ‡æ¢åˆ°å¦ä¸€ä¸ª Kubernetes åç§°ç©ºé—´ | `:`nsâ |  |
| æŸ¥çœ‹æ‰€æœ‰å·²ä¿å­˜çš„èµ„æº | `:`screendump or sdâ |  |
| è¦åˆ é™¤èµ„æº (æŒ‰`TAB` é”®å¹¶è¾“å…¥`Enter`) | `ctrl-d` |  |
| æ€æ­»ä¸€ä¸ªèµ„æº(æ²¡æœ‰ç¡®è®¤å¯¹è¯æ¡†!) | `ctrl-k` |  |
| åˆ‡æ¢å®½åˆ— | `ctrl-w` | ç­‰åŒäº `kubectl ... -o wide` |
| åˆ‡æ¢é”™è¯¯çŠ¶æ€ | `ctrl-z` | æŸ¥çœ‹æœ‰é”™è¯¯çš„èµ„æº |
| è¿è¡Œ pulsesï¼ˆè„‰å†²ï¼‰è§†å›¾ | `:`pulses or puâ |  |
| è¿è¡Œ XRayï¼ˆX å…‰ï¼‰è§†å›¾ | `:`xray RESOURCE \[NAMESPACE\]â | èµ„æºå¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼špo, svc, dp, rs, sts, ds, NAMESPACE å‚æ•°å¯é€‰ |
| è¿è¡Œ Popeyeï¼ˆè¯„ä¼°è·‘åˆ†ï¼‰ è§†å›¾ | `:`popeye or popâ | å‚é˜… [https://popeyecli.io](https://popeyecli.io/) |

## æ·±åº¦ä½¿ç”¨[](https://ewhisper.cn/posts/48546/#%E6%B7%B1%E5%BA%A6%E4%BD%BF%E7%94%A8)

### å¿«æ·é”®[](https://ewhisper.cn/posts/48546/#%E5%BF%AB%E6%8D%B7%E9%94%AE)

èŠ±ä¸ª 10 - 30 åˆ†é’Ÿç†Ÿæ‚‰å¿«æ·é”®ï¼Œç„¶å â€”â€” è¶…çº§çˆ½ï¼Œå„ç§å¿«é€Ÿè¿›å…¥ã€æŸ¥æ‰¾ã€åˆ‡æ¢ã€çœ‹ yamlã€çœ‹æ—¥å¿—ã€æ»šåŠ¨æ—¥å¿—ã€è¿› shellã€ç¼–è¾‘ã€å¤åˆ¶ â€¦

å¼ºçƒˆæ¨èèŠ±æ—¶é—´ç†Ÿæ‚‰ï¼Œä½ ä¼šæ„Ÿè§‰æ•ˆç‡é£å‡ã€‚ğŸ¤“ğŸ¤“ğŸ¤“

### è¿‡æ»¤[](https://ewhisper.cn/posts/48546/#%E8%BF%87%E6%BB%A4)

å®ƒçš„è¿‡æ»¤åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œä½¿å¾—ä½ å¯ä»¥éå¸¸å¿«é€Ÿçš„å®šä½èµ„æºï¼Œæ¯”å¦‚æˆ‘æƒ³è¦çœ‹ traefik çš„æ‰€æœ‰ CRDï¼Œæ“ä½œå¦‚ä¸‹ï¼š

<table><tbody><tr><td><pre><span>1</span><br><span>2</span><br></pre></td><td><pre><code>ctrl-<span>a</span><br>/traefik<br></code><p><i></i>CSS</p></pre></td></tr></tbody></table>

[![traefik crd](https://pic-cdn.ewhisper.cn/img/2021/11/11/c2a939670efa22bb82ef301f29a2203a-image-20211111234925565.png)](https://pic-cdn.ewhisper.cn/img/2021/11/11/c2a939670efa22bb82ef301f29a2203a-image-20211111234925565.png "traefik crd")

æ›´å¤šè¿‡æ»¤åŠŸèƒ½ï¼Œå¯ä»¥è‡ªå·±è¯•ä¸€è¯•ï¼Œè¿›ä¸€æ­¥ç ”ç©¶ã€‚

### Pulses - ç›‘æ§ Dashboard[](https://ewhisper.cn/posts/48546/#Pulses-%20%E7%9B%91%E6%8E%A7%20-Dashboard)

`:pulse` å°±è¿›å…¥è¿™ä¸ªæ¨¡å¼ï¼Œè¿™ä¸ªå°±æ˜¯ä¸€ä¸ªç›‘æ§ Dashboardï¼Œå¦‚ä¸‹å›¾ï¼š

[![Pulses](https://pic-cdn.ewhisper.cn/img/2021/11/11/d708e3e07cd9ecd59b01ac8641b4ab7e-image-20211111235352404.png)](https://pic-cdn.ewhisper.cn/img/2021/11/11/d708e3e07cd9ecd59b01ac8641b4ab7e-image-20211111235352404.png "Pulses")

å¯ä»¥éå¸¸ç›´è§‚çœ‹åˆ°é›†ç¾¤ç°åœ¨çš„å¥åº·æƒ…å†µ â€”â€” æ˜æ˜¾ç°åœ¨æˆ‘çš„ Events æœ‰å¼‚å¸¸ï¼Œç›´æ¥æŒ‰ `5â`, å†æŒ‰ `ctrl-z`æŸ¥çœ‹å¼‚å¸¸äº‹ä»¶ï¼š

[![Events](https://pic-cdn.ewhisper.cn/img/2021/11/12/65f360f8fef97840ebc6f521ce2ba8c6-image-20211111235655808.png)](https://pic-cdn.ewhisper.cn/img/2021/11/12/65f360f8fef97840ebc6f521ce2ba8c6-image-20211111235655808.png "Events")

### XRay[](https://ewhisper.cn/posts/48546/#XRay)

XRay ä¼šæä¾›ä»¥æŸä¸ª Kubernetes èµ„æºä¸ºç»´åº¦çš„å…³è”å…³ç³»ï¼Œåƒ X å…‰ä¸€æ ·ï¼Œé€å°„åˆ°èµ„æºçš„å†…éƒ¨ã€‚å¦‚ä¸‹å›¾ï¼š

[![XRay](https://pic-cdn.ewhisper.cn/img/2021/11/11/4537c60b970a849e76e6c355b18c2160-image-20211111235938637.png)](https://pic-cdn.ewhisper.cn/img/2021/11/11/4537c60b970a849e76e6c355b18c2160-image-20211111235938637.png "XRay")

ä»¥ traefik deployment ä¸ºä¾‹ï¼Œä½äº kube-system nsï¼Œå¯åŠ¨äº†ä¸€ä¸ª `traefik-97b44b794-7qvzk` podï¼Œpod åªæœ‰ä¸€ä¸ª `traefik` containerï¼Œå¹¶é€šè¿‡ ServiceAccount `traefik` æŒ‚è½½äº† secret `traefik-token-r7vd2`ã€‚

### Popeye[](https://ewhisper.cn/posts/48546/#Popeye)

Popeyeï¼ˆå¤§åŠ›æ°´æ‰‹ï¼‰å°±æ˜¯ä¸ºé›†ç¾¤ã€ä»¥åŠé›†ç¾¤å†…çš„æ¯éš”èµ„æºæ‰“åˆ†ï¼Œåˆ†æ•°ä» 0 - 100ï¼Œæœ€åæ ¹æ®å¾—åˆ†è¯„å‡ºä½ çš„é›†ç¾¤çš„æƒ…å†µï¼šå¾—åˆ†æ˜¯ A è¿˜æ˜¯ Cï¼Œå¹¶ç»™å‡ºå…·ä½“åŸå› ã€‚

å¦‚ä¸‹ï¼š

[![popeye](https://pic-cdn.ewhisper.cn/img/2021/11/12/39c6adab49035e12abd2c30d3d76216a-image-20211112000535421.png)](https://pic-cdn.ewhisper.cn/img/2021/11/12/39c6adab49035e12abd2c30d3d76216a-image-20211112000535421.png "popeye")

DaemonSet å¾— 0 åˆ†åŸå› æ˜¯éƒ½æ²¡æŒ‡å®š requests å’Œ limitsï¼š

[![DaemonSet 0 åˆ†åŸå› ](https://pic-cdn.ewhisper.cn/img/2021/11/12/9e81b367caa99f48782f68b7fc18b6ed-image-20211112000721855.png)](https://pic-cdn.ewhisper.cn/img/2021/11/12/9e81b367caa99f48782f68b7fc18b6ed-image-20211112000721855.png "DaemonSet 0 åˆ†åŸå› ")

Service å¾— 20 åˆ†åŸå› å°±å¤šäº†ï¼Œç”šè‡³è¿˜è´´å¿ƒè€ƒè™‘åˆ°äº†å¼€é”€è´µä¸è´µçš„é—®é¢˜ï¼š

[![Service 20 åˆ† åŸå› ](https://pic-cdn.ewhisper.cn/img/2021/11/12/f4da4efb7c16ecb867152fa3ea63de53-image-20211112000919341.png)](https://pic-cdn.ewhisper.cn/img/2021/11/12/f4da4efb7c16ecb867152fa3ea63de53-image-20211112000919341.png "Service 20 åˆ† åŸå› ")

### ğŸ” ç›´è§‚çš„ RBAC[](https://ewhisper.cn/posts/48546/#%F0%9F%94%90-%20%E7%9B%B4%E8%A7%82%E7%9A%84%20-RBAC)

RBAC çš„ yaml çœ‹èµ·æ¥å¾ˆä¸æ–¹ä¾¿çš„ï¼Œå¦‚æœå¯¹æƒé™æ¯”è¾ƒè¦æ±‚æ¯”è¾ƒå¤šï¼Œé‚£ K9S ç»å¯¹å¥½ç”¨ç›´è§‚ï¼Œå¦‚ä¸‹ï¼Œtraefik role æœ‰å“ªäº›æƒé™ä¸€ç›®äº†ç„¶ï¼šwhoã€whatã€howã€‚

[![RBAC è§†å›¾](https://pic-cdn.ewhisper.cn/img/2021/11/12/fb2524792e53b2327079a208c35524d7-image-20211112001218010.png)](https://pic-cdn.ewhisper.cn/img/2021/11/12/fb2524792e53b2327079a208c35524d7-image-20211112001218010.png "RBAC è§†å›¾")

## âœ æ€»ç»“[](https://ewhisper.cn/posts/48546/#%E2%9C%8D-%20%E6%80%BB%E7%BB%93%20-2)

K9S æ˜¯ä¸€ä¸ª **åŸºäºç»ˆç«¯çš„ K8S UI**ï¼Œåœ¨æ²¡æœ‰æ¡Œé¢ã€åªæœ‰ ç»ˆç«¯çš„æƒ…å†µä¸‹ä½¿ç”¨å®ƒï¼Œå¯ä»¥å¤§å¹…æå‡ä½ çš„æ•ˆç‡ä»¥åŠä½ å¯¹ K8S çš„è®¤çŸ¥ã€‚

å®ƒæœ‰å¾ˆå¤šå¼ºå¤§çš„åŠŸèƒ½ï¼Œå…¶ä¸­ï¼šå¿«æ·é”®ã€è¿‡æ»¤ã€Pulsesã€XRayã€Popeyeã€RBAC è¿™äº›åŠŸèƒ½ä¸€å®šè¦è¯•ä¸€è¯•ï¼Œä½“éªŒé£å‡ï¼

ä¸€èµ·ä½¿ç”¨å§~ ğŸ¤“ğŸ¤“ğŸ¤“