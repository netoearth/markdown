![图片](https://mmbiz.qpic.cn/mmbiz_gif/cvQbJDZsKLp6wejHtKTRbqqQyt0wMk9K1wNtuwRqQTJAPOJ1KiaqSeSRbIJRTicVicKpDKRndBodY2DBNN20tvWwA/640?wx_fmt=gif&wxfrom=5&wx_lazy=1)

> 原创：小姐姐味道（微信公众号ID：xjjdog），欢迎分享，非公众号转载保留此声明。

即使是不懂编程的玩家，在对比 NAS 的时候，也会两眼放光，考虑很多因素，比如 RAID 级别、速度、易用程度等。作为时时刻刻与代码打交道的我们，更需要关注数据的存取问题。

一开始，开箱即用的 MySQL，一定是企业的首选。不仅仅因为用的人多，更重要的是生态成熟。要工具有工具，要人有人。对于老板来说，员工看着不爽，可以随时辞退，是一个非常理想的状态。

但是，没有胸怀的老板，干的一定不会长久，因为如果商务会吹、老板会忽悠，业务会飞速发展（虽然现在这种机会比较少了）。对于 MySQL 来说，很快就会遇到问题。

这个时候，就需要一些比只会用 MySQL 级别高一些的人才，来配合老板圆梦。

是时候了，由单机 MySQL 向分布式发展了。

单机 MySQL 面临很多问题。

1.  单表太大，比如超过 500w，查询就非常吃力
    
2.  单库太大，各种资源告急
    
3.  读请求太高，严重影响写请求
    

对此，一堆概念也是腾空而出，比如分库分表、读写分离等。

很长时间以来，国内互联网的做法普遍是采用加入一个中间件的方式来解决，但随着分布式数据库的技术越来越成熟，这些魔法逐渐下沉到它本应该解决的层面--数据库实现层。

留给分库分表技术的时间，已经不多了，它的存量市场越来越少了。分库分表技术，退出历史舞台，也是迟早的事情了。

解决上面三个单机 MySQL 问题，有很多种切入层面。比如，你简单的在 MyBatis 或者 JPA 之上使用 AOP 或者拦截器封装一层，也可以实现，这也是最傻的方式。

再进一步，就可以采用在 JDBC 之上的驱动层来实现，把分库分表的路由维护在内存里，通过重写的 DataSource、Connection、Statment、ResultSet等，对业务进行无侵入的改进。但可惜的是，我们还必须要维护与逻辑表相对应的物理表，而且功能也是阉割的，不确定性依然不小。更要命的是，JDBC 只支持 Java，对于某些公司来说，就非常的不适用。

再就是中间件的传统模式，Proxy。把自己伪装成一个MySQL Server，接受 Client 的请求。至于它后面怎么去操作真实的数据库，你都不需要知道。但 Proxy 本身也是一套服务，你有运维成本在里面，同时功能依然是阉割的。

框架层，驱动层，代理层，在过去很长一段时间里，有无数的互联网公司前赴后继的试水，从 TDDL、Cobar，到 MyCat、ShardingSphere，各种层面的中间件也是层出不穷。但最近几年，这种争相斗艳的场面逐渐不再，到最后剩下来的，也就ShardingSphere这一枝独秀了。

是问题不存在了么？不，正好相反，问题越来越严重。并不是问题消失了，而是它被转化成其他解决方式了。

抛开关系型数据库不说，很久之前，类似于 ElasticSearch、Cassandra这样的 NoSQL 存储，分片和副本的概念，就已经非常成熟了，而且它们是内置的，并不需要 DBA 去人工维护它们的物理位置。

对于关系型数据库来说，走向分布式也终将成为必然。随着 Raft 等协议应用越来越广泛，分布式数据库的可靠性也逐渐得到了保证。如果你以前因为事务问题而拒绝采用某些 NoSQL 产品，那么如今完全兼容 MySQL 的分布式数据库，你没有理由再说 No。

云厂商，直接提供了像Aurora、PolarDB之类的MySQL增强，更有类似 TiDB、OceanBase 这样纯粹的分布式数据库，越来越多的业务走向了这个终途。当你的团队加班加点验证着分库分表中间件的时候，却发现其实换个兼容的存储就能玩得转，你会怎么选，简直不用再多说。

当然，一旦你选用了分布式数据库，以前的 DBA 经验可能就不管用了，比如说索引及其二级索引。你的团队不得不学习新的知识，来应对分布式环境。

但这些都是阵痛，长远看来，分布式数据库是趋势，而分库分表中间件只能吃存量。

当你的业务有了常年累积的复杂数据，你可能会采用复杂的分库分表组件，但如果你的业务比较新，可预见的未来会有大量数据，那一个分布式数据库可能是最合适的。

分库分表中间件并不是消失了。它摇身一变，变成了分布式数据库的一部分。

你可能会听到很多切到分布式数据库，又从分布式数据库切回到 MySQL 的案例，这属于想吃螃蟹但并没有吃到。目前来看，分布式数据库越来越稳定，生态建设也越来越好。而分库分表，则属于存量业务，终将会退出历史的舞台。

![图片](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

-   [具备混合负载能力的分布式KV存储-keeWiDB](http://mp.weixin.qq.com/s?__biz=MzAwNDUxOTQ5MQ==&mid=2247534459&idx=1&sn=459cc7244f9fa622d464e71caafa9a9e&chksm=9b28a457ac5f2d4161de739b6b468a8af7adb3dff8cf59aa551db6d7ec7ff91f84211482e13a&scene=21#wechat_redirect)
    
-   [腾讯云数据库伍鑫：MPP数据库HTAP技术探索](http://mp.weixin.qq.com/s?__biz=MzAwNDUxOTQ5MQ==&mid=2247534459&idx=2&sn=aa5656e76d6bef9da458e3800991719f&chksm=9b28a457ac5f2d41d16b42f1d155191d5ab0e9c0fbf132d14ed379a502f28967649faca665f6&scene=21#wechat_redirect)
    
-   [开源机器学习数据库OpenMLDB](http://mp.weixin.qq.com/s?__biz=MzAwNDUxOTQ5MQ==&mid=2247534258&idx=1&sn=6d12323d48c7269e2caeed7094f69b5d&chksm=9b28a59eac5f2c884881052facaa477c6693ce30568492a7f4f13f14596052d97e6594b3b44a&scene=21#wechat_redirect)
    
-   [网易严选基于“服务画像”的建设实践](http://mp.weixin.qq.com/s?__biz=MzAwNDUxOTQ5MQ==&mid=2247534255&idx=1&sn=256f2dbece21d70996fbbadc9ea47181&chksm=9b28a583ac5f2c95f4a40f6d88d08051e12fc54e9e1cd35f0d8acd8e2c2379f04403c717bc85&scene=21#wechat_redirect)
    
-   [
    
    ](http://mp.weixin.qq.com/s?__biz=MzAwNDUxOTQ5MQ==&mid=2247534240&idx=1&sn=235d5c3655bfa4dbd9e7f01d5e2c571d&chksm=9b28a58cac5f2c9a0c7ff246268cfa5769d80de9b3bea9e36692e2706dfb04b1dfeef5692c06&scene=21#wechat_redirect)
    
    [创新是国产数据库的唯一出路 | DTCC2022](http://mp.weixin.qq.com/s?__biz=MzAwNDUxOTQ5MQ==&mid=2247534240&idx=1&sn=235d5c3655bfa4dbd9e7f01d5e2c571d&chksm=9b28a58cac5f2c9a0c7ff246268cfa5769d80de9b3bea9e36692e2706dfb04b1dfeef5692c06&scene=21#wechat_redirect)
    
    [
    
    ](http://mp.weixin.qq.com/s?__biz=MzAwNDUxOTQ5MQ==&mid=2247534240&idx=1&sn=235d5c3655bfa4dbd9e7f01d5e2c571d&chksm=9b28a58cac5f2c9a0c7ff246268cfa5769d80de9b3bea9e36692e2706dfb04b1dfeef5692c06&scene=21#wechat_redirect)  
    
-   [光大银行实时流数据平台架构实践](http://mp.weixin.qq.com/s?__biz=MzAwNDUxOTQ5MQ==&mid=2247533869&idx=1&sn=ce24ed8daded864b37d5703fef939788&chksm=9b28a601ac5f2f17e7ed749f3ecb963243b35b93c73a54106d445ab79686754c074819430588&scene=21#wechat_redirect)
    
-   [小红书近线服务统一调度平台建设实践](http://mp.weixin.qq.com/s?__biz=MzAwNDUxOTQ5MQ==&mid=2247533848&idx=1&sn=4dc5199699ecc4ac7e9d32e54720f6a0&chksm=9b28a634ac5f2f22a3d72e9effc689e5711f303c54112f4defb56a357c6a08e74740d9aa35fc&scene=21#wechat_redirect)
    
-   [B站运维数仓建设和数据治理实践](http://mp.weixin.qq.com/s?__biz=MzAwNDUxOTQ5MQ==&mid=2247533845&idx=1&sn=30e0a5098a3cf862fc889e8a6b2549ff&chksm=9b28a639ac5f2f2fe2e98b497f2bdab3d5b7da4546949625e3b931f937287b7119f7a16d0872&scene=21#wechat_redirect)
    
-   [银联分布式数据库安全设计](http://mp.weixin.qq.com/s?__biz=MzAwNDUxOTQ5MQ==&mid=2247533817&idx=1&sn=9b73da035688a0fe035b3a7cdedac653&chksm=9b28a7d5ac5f2ec3f476122b35b9822596b28b004852338b9d216f25ce32b390955494f1e969&scene=21#wechat_redirect)
    
-   [
    
    ](http://mp.weixin.qq.com/s?__biz=MzAwNDUxOTQ5MQ==&mid=2247533516&idx=1&sn=21b6f5ebc39b2803dc5acd6e220affe5&chksm=9b28a0e0ac5f29f6ee1fa4550e0d925b4109518b21692595b108c638ea8bf599293f213b6248&scene=21#wechat_redirect)
    
    [爱奇艺在服务网格方向的落地实践](http://mp.weixin.qq.com/s?__biz=MzAwNDUxOTQ5MQ==&mid=2247533516&idx=1&sn=21b6f5ebc39b2803dc5acd6e220affe5&chksm=9b28a0e0ac5f29f6ee1fa4550e0d925b4109518b21692595b108c638ea8bf599293f213b6248&scene=21#wechat_redirect)